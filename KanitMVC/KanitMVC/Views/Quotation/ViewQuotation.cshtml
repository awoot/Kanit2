
@{
    ViewBag.Title = "View Quotation";
}

@*<h2>View Quotation</h2>*@

@Styles.Render("~/Content/kendo/styles/kendo.common-bootstrap.min.css")
@Styles.Render("~/Content/kendo/styles/kendo.bootstrap.min.css")


@Scripts.Render("~/Scripts/kendo/js/kendo.ui.core.min.js")


@Scripts.Render("~/Scripts/Common.js")


@Scripts.Render("~/Scripts/CUDS/Sell/Quotation/ViewQuotation.js")

<form id="FormQuotation">
    <div class="row">
        <div class="col-lg-12">
            <section class="panel">
                <div style="padding: 10px;">
                    @*<div id="btnRecall" class="btn btn-warning" data-bind="events: {click: onRecall}">Recall</div>*@
                    <div class="btn btn-warning" data-bind="events: {click: onRecall}">Recall</div>
                    <div class="btn btn-success" data-bind="events: {click: onSubmitQuote}">Submit Quote</div>
                    <div class="btn btn-danger" data-bind="events: {click: onPending}">Pending</div>
                    <div class="btn btn-success" data-bind="events: {click: onWin}">Win</div>
                    <div class="btn btn-danger" data-bind="events: {click: onLoss}">Lose</div>
                </div>

                <header class="panel-heading">
                    Quotation
                </header>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-xs-6 col-sm-4">
                            <div class="form-group">
                                <label class="col-sm-5 control-label">Quotation No.</label>
                                <div class="col-sm-7">
                                    <span class="form-control m-bot15" data-bind="text: Header.QuotationNo" />
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-6 col-sm-4">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Customer</label>
                                <div class="col-sm-9">
                                    <span class="form-control m-bot15" data-bind="text: Header.CompanyName" />
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-6 col-sm-4 spandiv">
                            <div class="form-group">
                                <label class="col-sm-2 control-label">Note</label>
                                <div class="col-sm-10">
                                    <span class="form-control m-bot15" data-bind="text: Header.Remark" />
                                </div>
                            </div>
                        </div>
                        <div class="clearfix visible-xs-block"></div>
                        <div class="col-xs-6 col-sm-4">
                            <div class="form-group">
                                <label class="col-sm-5 control-label">Your Reference</label>
                                <div class="col-sm-7">
                                    <span class="form-control m-bot15" data-bind="text: Header.Ref" />
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-6 col-sm-4">
                            <div class="form-group">
                                <label class="col-sm-5 control-label">Quotation Date</label>
                                <div class="col-sm-7">
                                    <span class="form-control m-bot15" data-format="dd/MM/yyyy" data-bind="text: Header.QuotationDate" />

                                </div>
                            </div>
                        </div>
                        <div class="clearfix visible-xs-block"></div>
                        <div class="col-xs-6 col-sm-4">
                            <div class="form-group">
                                <label class="col-sm-5 control-label">Validity(Days)</label>
                                <div class="col-sm-7">
                                    <span class="form-control m-bot15" data-bind="text: Header.Validity" />
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-6 col-sm-4">
                            <div class="form-group">
                                <label class="col-sm-5 control-label">Delivery Time(Weeks)</label>
                                <div class="col-sm-7">
                                    <span class="form-control m-bot15" data-bind="text: Header.DeliveryTime" />
                                </div>
                            </div>
                        </div>
                        <div class="clearfix visible-xs-block"></div>
                        <div class="col-xs-6 col-sm-4">
                            <div class="form-group">
                                <label class="col-sm-5 control-label">Payment Term(Days)</label>
                                <div class="col-sm-7">
                                    <span class="form-control m-bot15" data-bind="text: Header.PaymentTerm" />
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-6 col-sm-4">
                            <div class="form-group">
                                <label class="col-sm-5 control-label">Seller</label>
                                <div class="col-sm-7">
                                    <span class="form-control m-bot15" data-bind="text: Header.Seller" />
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-6 col-sm-4">
                            <div class="form-group">
                                <div style="position:relative;">
                                    <label class="col-sm-2 control-label">State</label>
                                    <div class="col-sm-7">
                                        <span class="form-control m-bot15" data-bind="text: Header.State" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="clearfix visible-xs-block"></div>
                        <div class="col-xs-6 col-sm-4">
                            <div class="form-group">
                                <label class="col-sm-5 control-label">Warning Date</label>
                                <div class="col-sm-7">
                                    <span class="form-control m-bot15" data-format="dd/MM/yyyy" data-bind="text: Header.WarningDate" />
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-6 col-sm-4">
                            <div class="form-group">
                                <label class="col-sm-4 control-label">Cost Sheet</label>
                                <div class="col-sm-4">
                                    <a data-bind="attr: {href: Header.CostSheet}">อ่านลายละเอียด</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-6 col-sm-4">
                            <div class="form-group">
                                <label class="col-sm-4 control-label">Cost1</label>
                                <div class="col-sm-4">
                                    <span class="form-control m-bot15" data-format="n" data-bind="text: Header.Cost1" />
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-6 col-sm-4">
                            <div class="form-group">
                                <label class="col-sm-4 control-label">SellPrice</label>
                                <div class="col-sm-4">
                                    <span class="form-control m-bot15" data-format="n" data-bind="text: Header.SellPrice" />
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-6 col-sm-4 spandiv">
                            <div class="form-group">
                                <label class="col-sm-2 control-label">Reason</label>
                                <div class="col-sm-10">
                                    <span class="form-control m-bot15" data-bind="text: Header.Reason" />
                                </div>
                            </div>
                        </div>
                        <div class="clearfix visible-xs-block"></div>
                        <div class="col-xs-6 col-sm-12">
                            <div class="col-xs-6 col-sm-5 padleft0">
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Inco Term</label>
                                    <div class="col-sm-7">
                                        <span class="form-control m-bot15" data-bind="text: Header.IncoTerm" />
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix visible-xs-block"></div>
                            <div class="col-xs-6 col-sm-4 padleft0 mgn-left15">
                                <div class="form-group">
                                    <span class="form-control m-bot15" data-bind="text: Header.IncoTermDetail" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-6 col-sm-12">
                            <div class="col-xs-6 col-sm-5 padleft0">
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Currency</label>
                                    <div class="col-sm-7">
                                        <span class="form-control m-bot15" data-bind="text: Header.Currency" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <section class="panel">
                                <!--<div class="col-lg-6"></div>-->
                                <div id="divProductDetail">

                                    <header class="panel-heading">
                                        <div class="col-xs-7 col-sm-10 col-lg-11">Description</div>
                                    </header>
                                    <div class="table-responsive">
                                        <table style="width: 100%" id="tblCompany" class="table table-striped table-hover">
                                            <thead>
                                                <tr>
                                                    <th style="width: 40px;">No.</th>
                                                    <th style="width: 80px;">Line No.</th>
                                                    <th style="width: 130px;">Product</th>
                                                    <th style="">Description</th>
                                                    <th style="width: 90px;">Quantity</th>
                                                    <th style="width: 60px;">Unit</th>
                                                    <th style="width: 100px;" class="text-center">Unit Price</th>
                                                    <th style="width: 100px;" class="text-center">Amount</th>
                                                </tr>
                                            </thead>
                                            <tbody data-template="templateProductDetail" data-bind="source: Detail"></tbody>
                                            <tbody>
                                                <tr>
                                                    <td colspan="7">Sub Total</td>
                                                    <td colspan="2" class="width50">
                                                        <label class="width100 text-right" data-format="n2" data-bind="text: Header.SubTotal" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="7">Discount</td>
                                                    <td colspan="2" class="width100">
                                                        <label class="width100 text-right" data-format="n2" data-bind="text: Header.Discount" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="7">Total</td>
                                                    <td colspan="2" class="width100">
                                                        <label class="width100 text-right" data-format="n2" data-bind="text: Header.Total" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="7">
                                                        <div class="floatleft mgn-right5">Vat(%)</div>
                                                        <span data-format="n0" data-bind="text: Header.Vat"></span>
                                                    </td>
                                                    <td colspan="2" class="width100">
                                                        <label class="width100 text-right" data-format="n2" type="text" data-bind="text: Header.VatValue" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="7" class="fontbold">Net Total</td>
                                                    <td colspan="2" class="width100">
                                                        <label class="width100 text-right" data-format="n2" data-bind="text: Header.NetTotal" />
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            <section class="panel">
                                <header class="panel-heading">
                                    <div class="col-xs-7 col-sm-10 col-lg-11">Work Flow</div>
                                    <div class="col-xs-5 col-sm-2 col-lg-1">

                                    </div>
                                </header>
                                <div class="table-responsive">
                                    <table id="tblCompany" class="table table-striped table-hover">
                                        <thead>
                                            <tr>
                                                <th>No.</th>
                                                <th>Full Name</th>
                                                <th>Position</th>
                                                <th>Task</th>
                                                <th>Assigned Data</th>
                                                <th>Action</th>
                                                <th>Action Data</th>
                                                <th width="150px;" colspan="3" class="text-center"><i class="icon_cogs"></i> Action</th>
                                            </tr>
                                        </thead>
                                        <tbody data-template="templateWorkFlowDetail" data-bind="source: WorkFlow"></tbody>
                                    </table>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>
            </section>


        </div>
    </div>
</form>

<script>
    $(document).ready(function (e) {
        GetData(@Request.Params["id"]);
    })
</script>

<script id="templateProductDetail" type="text/template">
    <tr>
        <td><span data-bind="text: No" /></td>
        <td><span data-bind="text: LineNo" /></td>
        <td><span data-bind="text: ProductCode" /></td>
        <td><span data-bind="text: Description" /></td>
        <td style="text-align: right"><span data-format="n0" data-bind="text: Quantity" /></td>
        <td><span data-bind="text: UnitName" /></td>
        <td style="text-align: right"><span data-format="n2" data-bind="text: UnitPrice" /></td>
        <td style="text-align: right"><span data-format="n2" data-bind="text: Amount" /></td>
    </tr>
</script>

<script id="templateWorkFlowDetail" type="text/template">
    <tr>
        <td><span data-bind="text: Step" /></td>
        <td><span data-bind="text: AssignedToFullName" /></td>
        <td><span data-bind="text: AssignedToPosition" /></td>
        <td><span data-bind="text: Title" /></td>
        <td><span data-format="dd/MM/yyyy" data-bind="text: AssignedDate" /></td>
        <td><span data-format="dd/MM/yyyy" data-bind="text: CompletedDate" /></td>
        <td><span data-bind="text: Action" /></td>
        <td>
            #if(CanAction) {#
            <div class="btn btn-success" data-bind="events: {click: onApprove}"><i class="fa fa-check-square-o"></i></div>
            <div class="btn btn-danger" data-bind="events: {click: onReject}"><i class="icon_close_alt2"></i></div>
            #}#
        </td>
    </tr>
</script>

